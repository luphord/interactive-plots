<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Interactive Plots</title>
    <link rel="stylesheet" href="assets/vendor/chartist.min.css">
    <link rel="stylesheet" href="assets/vendor/water.min.css">
  </head>
  <body>
    <h1>Interactive Plots</h1>
    <div id="container">
    </div>
    <script src="assets/vendor/chartist.min.js"></script>
    <script>

const InteractivePlot = function(container) {
  this.container = container;
}

InteractivePlot.prototype.createSlider = function(min, max, value) {
  const slider = document.createElement("input");
  slider.type = "range";
  slider.min = min;
  slider.max = max;
  slider.value = value;
  this.container.appendChild(slider);
  return slider;
};

InteractivePlot.prototype.createLineChart = function(data, options) {
  const div = document.createElement("div");
  div.classList.add(".ct-chart");
  div.classList.add("ct-perfect-fourth");
  this.container.appendChild(div);
  return new Chartist.Line(div, data, options);
};

// define sliders and charts

var data = {
  series: [
    [5, 5, 7, 1, 6, 0],
    [0, 1, 2, 3, 4, 5],
    [-2, 4, 3, 2, 5, 1]
  ]
};

var options = {
  showPoint: false,
  lineSmooth: true,
  axisX: {
    showGrid: false,
    showLabel: false
  },
  axisY: {
    offset: 80,
    labelInterpolationFnc: function(value) {
      return value.toFixed(2);
    }
  }
};

var plt = new InteractivePlot(document.getElementById("container"));

var slider = plt.createSlider(1, 20, 5);

var slider2 = plt.createSlider(1, 20, 5);

var chart = plt.createLineChart(data, options);

slider.oninput = function() {
    data.series[0][0] = this.value;
    chart.update(data);
};

slider2.oninput = function() {
    data.series[0][1] = this.value;
    chart.update(data);
};

// Updates to/from hash
var counter = 0

slider.onchange = () => history.pushState(null, null, "#" + ++counter);

slider2.onchange = () => history.pushState(null, null, "#" + ++counter);

window.onhashchange = evt => console.log(evt);
    </script>
  </body>
</html>